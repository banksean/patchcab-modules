import{usePan as t,scale as e,round as s,Label as n,Faceplate as _,Bang as o,Patch as r,Knob as a}from"/js/core.js";__sv.SvelteComponent;function i(t){let e,s;return e=new n({props:{top:-1,$$slots:{default:[l]},$$scope:{ctx:t}}}),{c(){__sv.create_component(e.$$.fragment)},m(t,n){__sv.mount_component(e,t,n),s=!0},p(t,s){const n={};33&s&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){s||(__sv.transition_in(e.$$.fragment,t),s=!0)},o(t){__sv.transition_out(e.$$.fragment,t),s=!1},d(t){__sv.destroy_component(e,t)}}}function l(t){let e;return{c(){e=__sv.text(t[0])},m(t,s){__sv.insert(t,e,s)},p(t,s){1&s&&__sv.set_data(e,t[0])},d(t){t&&__sv.detach(e)}}}function v(t){let e,s,n=t[0]&&i(t);return{c(){e=__sv.element("button"),n&&n.c(),__sv.attr(e,"aria-label","indicator"),__sv.set_style(e,"left",t[3]+"px"),__sv.set_style(e,"top",t[4]+"px"),__sv.attr(e,"class","svelte-1pjduaz"),__sv.toggle_class(e,"on",t[2]),__sv.toggle_class(e,"high",t[1])},m(t,_){__sv.insert(t,e,_),n&&n.m(e,null),s=!0},p(t,[_]){t[0]?n?(n.p(t,_),1&_&&__sv.transition_in(n,1)):(n=i(t),n.c(),__sv.transition_in(n,1),n.m(e,null)):n&&(__sv.group_outros(),__sv.transition_out(n,1,1,(()=>{n=null})),__sv.check_outros()),(!s||8&_)&&__sv.set_style(e,"left",t[3]+"px"),(!s||16&_)&&__sv.set_style(e,"top",t[4]+"px"),4&_&&__sv.toggle_class(e,"on",t[2]),2&_&&__sv.toggle_class(e,"high",t[1])},i(t){s||(__sv.transition_in(n),s=!0)},o(t){__sv.transition_out(n),s=!1},d(t){t&&__sv.detach(e),n&&n.d()}}}function c(t,e,s){let{label:n}=e,{high:_}=e,{active:o=!1}=e,{x:r=0}=e,{y:a=0}=e;return t.$$set=t=>{"label"in t&&s(0,n=t.label),"high"in t&&s(1,_=t.high),"active"in t&&s(2,o=t.active),"x"in t&&s(3,r=t.x),"y"in t&&s(4,a=t.y)},[n,_,o,r,a]}class p extends __sv.SvelteComponent{constructor(t){var e;super(),document.getElementById("svelte-1pjduaz-style")||((e=__sv.element("style")).id="svelte-1pjduaz-style",e.textContent="button.svelte-1pjduaz{position:absolute;width:18px;height:18px;border-radius:18px;background:var(--color-dark);border:1px solid rgba(0, 0, 0, 0.32);box-shadow:inset 2px 2px 0px rgba(255, 255, 255, 0.08), 0px 0px 0px 2px rgba(0, 0, 0, 0.12);cursor:pointer;color:inherit}button.high.svelte-1pjduaz{background:var(--color-dark-highlight)}button.svelte-1pjduaz{width:10px;height:10px;border-radius:50%}button.on.svelte-1pjduaz{background:var(--color-on);box-shadow:inset 2px 2px 0px rgba(255, 255, 255, 0.24), 0px 0px 0px 2px rgba(0, 0, 0, 0.12)}button.on.high.svelte-1pjduaz{background:var(--color-on-highlight)}",__sv.append(document.head,e)),__sv.init(this,t,c,v,__sv.safe_not_equal,{label:0,high:1,active:2,x:3,y:4})}}function u(t,e,s){const n=t.slice();return n[6]=e[s],n[7]=e,n[8]=s,n}function m(t){let e,s,n,_,o;function r(e){t[5](e,t[8])}let i={size:"s",x:20,y:48*t[8]+60,min:0,max:1,precision:2};return void 0!==t[0].seqSteps[t[8]]&&(i.value=t[0].seqSteps[t[8]]),e=new a({props:i}),__sv.binding_callbacks.push((()=>__sv.bind(e,"value",r))),_=new p({props:{x:68,y:48*t[8]+76,active:t[8]==t[1]}}),{c(){__sv.create_component(e.$$.fragment),n=__sv.space(),__sv.create_component(_.$$.fragment)},m(t,s){__sv.mount_component(e,t,s),__sv.insert(t,n,s),__sv.mount_component(_,t,s),o=!0},p(n,o){t=n;const r={};!s&&1&o&&(s=!0,r.value=t[0].seqSteps[t[8]],__sv.add_flush_callback((()=>s=!1))),e.$set(r);const a={};2&o&&(a.active=t[8]==t[1]),_.$set(a)},i(t){o||(__sv.transition_in(e.$$.fragment,t),__sv.transition_in(_.$$.fragment,t),o=!0)},o(t){__sv.transition_out(e.$$.fragment,t),__sv.transition_out(_.$$.fragment,t),o=!1},d(t){__sv.destroy_component(e,t),t&&__sv.detach(n),__sv.destroy_component(_,t)}}}function d(t){let e,s,n,_,o,a,i,l,v=t[0].seqSteps,c=[];for(let e=0;e<v.length;e+=1)c[e]=m(u(t,v,e));const p=t=>__sv.transition_out(c[t],1,1,(()=>{c[t]=null}));return n=new r({props:{label:"out",x:62,y:48+64*$,name:"out-cv",output:t[2]}}),o=new r({props:{label:"adv",x:18,y:64*$,name:"advance",input:t[4]}}),i=new r({props:{label:"rst",x:62,y:64*$,name:"reset",input:t[3]}}),{c(){e=__sv.element("steps");for(let t=0;t<c.length;t+=1)c[t].c();s=__sv.space(),__sv.create_component(n.$$.fragment),_=__sv.space(),__sv.create_component(o.$$.fragment),a=__sv.space(),__sv.create_component(i.$$.fragment),__sv.attr(e,"class","svelte-3pyt7d")},m(t,r){__sv.insert(t,e,r);for(let t=0;t<c.length;t+=1)c[t].m(e,null);__sv.insert(t,s,r),__sv.mount_component(n,t,r),__sv.insert(t,_,r),__sv.mount_component(o,t,r),__sv.insert(t,a,r),__sv.mount_component(i,t,r),l=!0},p(t,s){if(3&s){let n;for(v=t[0].seqSteps,n=0;n<v.length;n+=1){const _=u(t,v,n);c[n]?(c[n].p(_,s),__sv.transition_in(c[n],1)):(c[n]=m(_),c[n].c(),__sv.transition_in(c[n],1),c[n].m(e,null))}for(__sv.group_outros(),n=v.length;n<c.length;n+=1)p(n);__sv.check_outros()}},i(t){if(!l){for(let t=0;t<v.length;t+=1)__sv.transition_in(c[t]);__sv.transition_in(n.$$.fragment,t),__sv.transition_in(o.$$.fragment,t),__sv.transition_in(i.$$.fragment,t),l=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)__sv.transition_out(c[t]);__sv.transition_out(n.$$.fragment,t),__sv.transition_out(o.$$.fragment,t),__sv.transition_out(i.$$.fragment,t),l=!1},d(t){t&&__sv.detach(e),__sv.destroy_each(c,t),t&&__sv.detach(s),__sv.destroy_component(n,t),t&&__sv.detach(_),__sv.destroy_component(o,t),t&&__sv.detach(a),__sv.destroy_component(i,t)}}}function g(t){let e,s;return e=new _({props:{title:"CVSEQ",color:"#1D1E22",$$slots:{default:[d]},$$scope:{ctx:t}}}),{c(){__sv.create_component(e.$$.fragment)},m(t,n){__sv.mount_component(e,t,n),s=!0},p(t,[s]){const n={};515&s&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){s||(__sv.transition_in(e.$$.fragment,t),s=!0)},o(t){__sv.transition_out(e.$$.fragment,t),s=!1},d(t){__sv.destroy_component(e,t)}}}const $=4;function h(t,e,s){let{state:n={seqSteps:Array($).fill(0)}}=e,_=0;const r=new Tone.Signal,a=new o(((t,e,n)=>{s(1,_=0)})),i=new o(((t,e,o)=>{s(1,_++,_),s(1,_%=$);let a=n.seqSteps[_];r.setValueAtTime(a,t)}));return t.$$set=t=>{"state"in t&&s(0,n=t.state)},[n,_,r,a,i,function(e,_){t.$$.not_equal(n.seqSteps[_],e)&&(n.seqSteps[_]=e,s(0,n))}]}class f extends __sv.SvelteComponent{constructor(t){var e;super(),document.getElementById("svelte-3pyt7d-style")||((e=__sv.element("style")).id="svelte-3pyt7d-style",e.textContent="steps.svelte-3pyt7d{position:absolute;top:0px}",__sv.append(document.head,e)),__sv.init(this,t,h,g,__sv.safe_not_equal,{state:0})}}export default f;
